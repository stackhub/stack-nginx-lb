containers:
  nginx-lb:
    scheduler: random
    availability: per-pool
    instances:
      min: 1
      max: 1
      default: 1
    config:
      image: "stackhub/nginx-lb:latest"
      env:
        SE_API_TOKEN: 0c4c498808fc0b79
        SE_LEADER_IP: 172.31.19.80
        SE_SERVICE_DISCOVERY_KEY: nginx-lb-nginx-backend-eg-80
      ports:
        - host_port: "8885"
          protocol: tcp
          container_port: "80"
    host_config:
      restart_policy: {}
  nginx-backend-eg:
    scheduler: random
    availability: per-pool
    instances:
      min: 5
      max: 5
      default: 5
    config:
      image: "stackhub/nginx-backend-eg:latest"
      ports:
        - protocol: tcp
          container_port: "80"
    host_config:
      restart_policy: {}
